import{_ as e,o as s,c as a,ag as i}from"./chunks/framework.BN1xCa1J.js";const g=JSON.parse('{"title":"Permissions & Access Control","description":"","frontmatter":{},"headers":[],"relativePath":"core/permissions.md","filePath":"core/permissions.md"}'),n={name:"core/permissions.md"};function l(r,t,d,o,c,p){return s(),a("div",null,[...t[0]||(t[0]=[i(`<h1 id="permissions-access-control" tabindex="-1">Permissions &amp; Access Control <a class="header-anchor" href="#permissions-access-control" aria-label="Permalink to &quot;Permissions &amp; Access Control&quot;">​</a></h1><p>Z-Core uses a <strong>layered, granular permission system</strong> that works across all FiveM frameworks (ESX, QBCore, ox_core) and can be managed entirely from the dashboard — no <code>server.cfg</code> editing required.</p><h2 id="permission-stack" tabindex="-1">Permission Stack <a class="header-anchor" href="#permission-stack" aria-label="Permalink to &quot;Permission Stack&quot;">​</a></h2><p>Z-Core evaluates permissions through three layers, merged at runtime:</p><table tabindex="0"><thead><tr><th style="text-align:left;">Priority</th><th style="text-align:left;">Source</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>1</strong></td><td style="text-align:left;"><strong>ACE Principals</strong></td><td style="text-align:left;">Native FiveM permissions from <code>server.cfg</code> (e.g., <code>add_ace identifier.license:abc zcore.admin allow</code>)</td></tr><tr><td style="text-align:left;"><strong>2</strong></td><td style="text-align:left;"><strong>Config Mapping</strong></td><td style="text-align:left;">Roles mapped to granular permissions in <code>config.ts</code> (e.g., <code>group.admin → [&#39;*&#39;]</code>)</td></tr><tr><td style="text-align:left;"><strong>3</strong></td><td style="text-align:left;"><strong>Staff Database</strong></td><td style="text-align:left;">Staff added via the Dashboard UI — stored in the <code>z_staff</code> MySQL table</td></tr></tbody></table><p>All three layers are merged into a single <code>permissions[]</code> array per player. If a player has permissions from <strong>any</strong> source, they are granted access.</p><h2 id="granular-permissions" tabindex="-1">Granular Permissions <a class="header-anchor" href="#granular-permissions" aria-label="Permalink to &quot;Granular Permissions&quot;">​</a></h2><p>Instead of broad tiers (Admin / Mod), Z-Core uses specific permission strings:</p><table tabindex="0"><thead><tr><th style="text-align:left;">Permission</th><th style="text-align:left;">Feature</th></tr></thead><tbody><tr><td style="text-align:left;"><code>zcore.admin.dashboard</code></td><td style="text-align:left;">Dashboard Overview</td></tr><tr><td style="text-align:left;"><code>zcore.admin.players</code></td><td style="text-align:left;">Player Management (kick, ban, heal, teleport, inventory, vehicles)</td></tr><tr><td style="text-align:left;"><code>zcore.admin.assets</code></td><td style="text-align:left;">Asset Browser &amp; Spawning</td></tr><tr><td style="text-align:left;"><code>zcore.admin.support</code></td><td style="text-align:left;">Support Tickets</td></tr><tr><td style="text-align:left;"><code>zcore.admin.economy</code></td><td style="text-align:left;">Economy Data</td></tr><tr><td style="text-align:left;"><code>zcore.admin.jobs</code></td><td style="text-align:left;">Job Management</td></tr><tr><td style="text-align:left;"><code>zcore.admin.server</code></td><td style="text-align:left;">Server Actions (weather, time, restart, theme)</td></tr><tr><td style="text-align:left;"><code>zcore.admin.logs</code></td><td style="text-align:left;">Live Console</td></tr><tr><td style="text-align:left;"><code>zcore.admin.bans</code></td><td style="text-align:left;">Ban List (view, ban, unban)</td></tr><tr><td style="text-align:left;"><code>zcore.admin.resources</code></td><td style="text-align:left;">Resource Manager</td></tr><tr><td style="text-align:left;"><code>zcore.admin.security</code></td><td style="text-align:left;">Security Shield</td></tr><tr><td style="text-align:left;"><code>zcore.admin.settings</code></td><td style="text-align:left;">System Settings &amp; Staff Management</td></tr></tbody></table><h3 id="special-permissions" tabindex="-1">Special Permissions <a class="header-anchor" href="#special-permissions" aria-label="Permalink to &quot;Special Permissions&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">Permission</th><th style="text-align:left;">Effect</th></tr></thead><tbody><tr><td style="text-align:left;"><code>*</code></td><td style="text-align:left;">Wildcard — grants access to <strong>everything</strong></td></tr><tr><td style="text-align:left;"><code>zcore.god</code></td><td style="text-align:left;">Root bypass — skips all permission checks</td></tr><tr><td style="text-align:left;"><code>zcore.admin.*</code></td><td style="text-align:left;">Category wildcard — grants all <code>zcore.admin.*</code> sub-permissions</td></tr></tbody></table><h2 id="config-based-mapping-config-ts" tabindex="-1">Config-Based Mapping (<code>config.ts</code>) <a class="header-anchor" href="#config-based-mapping-config-ts" aria-label="Permalink to &quot;Config-Based Mapping (\`config.ts\`)&quot;">​</a></h2><p>Map framework groups or ACE roles to granular permissions:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // QBCore</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;god&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;mod&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.players&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.support&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ESX</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;group.superadmin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;group.admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;group.mod&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.players&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Custom ACE roles</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;zcore.admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;zcore.mod&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.players&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.bans&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>This works because QBCore and ESX automatically sync their groups into FiveM ACE principals — Z-Core reads them via <code>IsPlayerAceAllowed</code>.</p><h2 id="in-dashboard-staff-management" tabindex="-1">In-Dashboard Staff Management <a class="header-anchor" href="#in-dashboard-staff-management" aria-label="Permalink to &quot;In-Dashboard Staff Management&quot;">​</a></h2><p>Server owners can add staff <strong>directly from the Settings UI</strong> without touching any config file:</p><ol><li>Open <strong>System Settings → Staff Management</strong></li><li>Click <strong>&quot;Add Staff&quot;</strong></li><li>Enter any FiveM identifier (e.g., <code>license:abc123</code>, <code>steam:110000112345678</code>, <code>discord:123456789</code>)</li><li>Choose a display name and role label</li><li>Toggle specific permissions using the checkbox grid</li></ol><p>These entries are saved to the <code>z_staff</code> database table and are checked at runtime alongside ACE/Config permissions.</p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>This means you can onboard a new moderator in seconds — just paste their Steam or License identifier, toggle the permissions they need, and they instantly have dashboard access.</p></div><h2 id="namespace-matching" tabindex="-1">Namespace Matching <a class="header-anchor" href="#namespace-matching" aria-label="Permalink to &quot;Namespace Matching&quot;">​</a></h2><p>Z-Core uses intelligent namespace resolution:</p><ul><li><strong>Downward:</strong> Having <code>zcore.admin.*</code> automatically grants <code>zcore.admin.players</code>, <code>zcore.admin.bans</code>, etc.</li><li><strong>Upward:</strong> Having <code>zcore.admin.players</code> satisfies a check for <code>zcore.admin</code> (because you hold a sub-permission of that namespace)</li></ul><p>This means backend endpoint guards work correctly regardless of whether permissions were assigned via ACE, Config, or the Database.</p><h2 id="endpoint-guard-map" tabindex="-1">Endpoint Guard Map <a class="header-anchor" href="#endpoint-guard-map" aria-label="Permalink to &quot;Endpoint Guard Map&quot;">​</a></h2><p>Every backend action is protected by a specific permission:</p><table tabindex="0"><thead><tr><th style="text-align:left;">Action</th><th style="text-align:left;">Required Permission</th></tr></thead><tbody><tr><td style="text-align:left;">Open Panel (<code>/zpanel</code>, <code>/admin</code>)</td><td style="text-align:left;">Any permission (<code>isStaff</code>)</td></tr><tr><td style="text-align:left;">Kick, Ban, Heal, Teleport Players</td><td style="text-align:left;"><code>zcore.admin.players</code></td></tr><tr><td style="text-align:left;">Search &amp; Edit Offline Players</td><td style="text-align:left;"><code>zcore.admin.players</code></td></tr><tr><td style="text-align:left;">View/Clear Inventory</td><td style="text-align:left;"><code>zcore.admin.players</code></td></tr><tr><td style="text-align:left;">Manage Vehicles</td><td style="text-align:left;"><code>zcore.admin.players</code></td></tr><tr><td style="text-align:left;">View Economy Data</td><td style="text-align:left;"><code>zcore.admin.economy</code></td></tr><tr><td style="text-align:left;">Browse &amp; Spawn Assets</td><td style="text-align:left;"><code>zcore.admin.assets</code></td></tr><tr><td style="text-align:left;">View/Issue/Revoke Bans</td><td style="text-align:left;"><code>zcore.admin.bans</code></td></tr><tr><td style="text-align:left;">Weather, Time, Restart</td><td style="text-align:left;"><code>zcore.admin.server</code></td></tr><tr><td style="text-align:left;">Save Theme</td><td style="text-align:left;"><code>zcore.admin.server</code></td></tr><tr><td style="text-align:left;">Manage Staff Members</td><td style="text-align:left;"><code>zcore.admin.settings</code></td></tr></tbody></table>`,27)])])}const y=e(n,[["render",l]]);export{g as __pageData,y as default};
