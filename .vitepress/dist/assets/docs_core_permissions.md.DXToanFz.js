import{_ as i,o as a,c as e,a2 as t}from"./chunks/framework.B72hu1JJ.js";const c=JSON.parse('{"title":"Permissions","description":"","frontmatter":{},"headers":[],"relativePath":"docs/core/permissions.md","filePath":"docs/core/permissions.md"}'),n={name:"docs/core/permissions.md"};function r(d,s,o,h,l,p){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="permissions" tabindex="-1">Permissions <a class="header-anchor" href="#permissions" aria-label="Permalink to &quot;Permissions&quot;">​</a></h1><p>Z-Core uses a Role-Based Access Control (RBAC) system that sits on top of your framework&#39;s native group system. You define roles once in config — Z-Core handles the resolution across frameworks automatically.</p><h2 id="how-permission-checks-work" tabindex="-1">How permission checks work <a class="header-anchor" href="#how-permission-checks-work" aria-label="Permalink to &quot;How permission checks work&quot;">​</a></h2><p>When Z-Core checks whether a player has a permission, it runs through five layers in order:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. ACE direct bypass   — IsPlayerAceAllowed(source, &#39;god&#39;)</span></span>
<span class="line"><span>2. Config RBAC         — Does any of the player&#39;s groups match config.permissions?</span></span>
<span class="line"><span>3. z_staff table       — Is the player listed as staff with matching permissions?</span></span>
<span class="line"><span>4. Wildcard match      — Does &#39;*&#39; or &#39;zcore.admin.*&#39; cover the requested permission?</span></span>
<span class="line"><span>5. Namespace prefix    — Does &#39;zcore.admin&#39; cover &#39;zcore.admin.players&#39;?</span></span></code></pre></div><p>The first layer that returns <code>true</code> wins. If all layers return <code>false</code>, the player is denied.</p><hr><h2 id="built-in-roles" tabindex="-1">Built-in roles <a class="header-anchor" href="#built-in-roles" aria-label="Permalink to &quot;Built-in roles&quot;">​</a></h2><p>Z-Core ships with these roles pre-configured:</p><table tabindex="0"><thead><tr><th>Role</th><th>Access</th></tr></thead><tbody><tr><td><code>zcore.god</code></td><td>Everything (<code>*</code>)</td></tr><tr><td><code>zcore.superadmin</code></td><td>Everything (<code>*</code>)</td></tr><tr><td><code>zcore.admin</code></td><td>All panel features</td></tr><tr><td><code>zcore.mod</code></td><td>Dashboard, players, assets, support, bans</td></tr></tbody></table><p>These map directly to ESX groups, QBCore roles, or ACE identifiers depending on your framework.</p><hr><h2 id="framework-group-compatibility" tabindex="-1">Framework group compatibility <a class="header-anchor" href="#framework-group-compatibility" aria-label="Permalink to &quot;Framework group compatibility&quot;">​</a></h2><p>Z-Core maps framework groups to permissions automatically:</p><h3 id="esx-groups-→-z-core-permissions" tabindex="-1">ESX groups → Z-Core permissions <a class="header-anchor" href="#esx-groups-→-z-core-permissions" aria-label="Permalink to &quot;ESX groups → Z-Core permissions&quot;">​</a></h3><table tabindex="0"><thead><tr><th>ESX group</th><th>Gets permissions of</th></tr></thead><tbody><tr><td><code>group.superadmin</code></td><td><code>zcore.god</code></td></tr><tr><td><code>group.admin</code></td><td><code>zcore.admin</code></td></tr><tr><td><code>group.mod</code></td><td><code>zcore.mod</code></td></tr></tbody></table><h3 id="qbcore-groups-→-z-core-permissions" tabindex="-1">QBCore groups → Z-Core permissions <a class="header-anchor" href="#qbcore-groups-→-z-core-permissions" aria-label="Permalink to &quot;QBCore groups → Z-Core permissions&quot;">​</a></h3><table tabindex="0"><thead><tr><th>QB group</th><th>Gets permissions of</th></tr></thead><tbody><tr><td><code>god</code></td><td><code>zcore.god</code></td></tr><tr><td><code>admin</code></td><td><code>zcore.admin</code></td></tr><tr><td><code>mod</code></td><td><code>zcore.mod</code></td></tr></tbody></table><p>You can add or override any group in the <code>permissions</code> block of <code>config.ts</code>. The keys are the framework&#39;s native group names, the values are permission arrays.</p><hr><h2 id="permission-keys" tabindex="-1">Permission keys <a class="header-anchor" href="#permission-keys" aria-label="Permalink to &quot;Permission keys&quot;">​</a></h2><p>These are the permission strings used throughout Z-Core and the admin panel:</p><table tabindex="0"><thead><tr><th>Key</th><th>What it grants</th></tr></thead><tbody><tr><td><code>*</code></td><td>All permissions</td></tr><tr><td><code>dashboard</code></td><td>Open the admin panel</td></tr><tr><td><code>players</code></td><td>View and manage online players</td></tr><tr><td><code>assets</code></td><td>Spawn vehicles and items</td></tr><tr><td><code>support</code></td><td>View and respond to tickets</td></tr><tr><td><code>bans</code></td><td>Issue and revoke bans</td></tr><tr><td><code>warns</code></td><td>Issue warns</td></tr><tr><td><code>staff</code></td><td>Manage staff members</td></tr><tr><td><code>economy</code></td><td>View economy dashboard</td></tr><tr><td><code>server</code></td><td>Server controls (weather, time, restarts)</td></tr><tr><td><code>resources</code></td><td>View and control server resources</td></tr><tr><td><code>security</code></td><td>Run the security scanner</td></tr></tbody></table><hr><h2 id="adding-custom-roles" tabindex="-1">Adding custom roles <a class="header-anchor" href="#adding-custom-roles" aria-label="Permalink to &quot;Adding custom roles&quot;">​</a></h2><p>To add your own role (e.g. a <code>senior_mod</code>), add it to <code>config.ts</code>:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... existing roles ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;senior_mod&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;players&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;assets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;support&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bans&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;warns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Then set a player&#39;s ESX group (or QB role) to <code>senior_mod</code>, and they&#39;ll receive exactly those permissions.</p><hr><h2 id="the-z-staff-table" tabindex="-1">The z_staff table <a class="header-anchor" href="#the-z-staff-table" aria-label="Permalink to &quot;The z_staff table&quot;">​</a></h2><p>For players who need admin access <strong>without</strong> changing their framework group, use the <code>z_staff</code> table. This is the recommended approach for separating in-character jobs from out-of-character admin status.</p><h3 id="structure" tabindex="-1">Structure <a class="header-anchor" href="#structure" aria-label="Permalink to &quot;Structure&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> z_staff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    identifier  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mod&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    permissions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">         DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;[]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- JSON array of permission keys</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    created_at  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="adding-staff-manually" tabindex="-1">Adding staff manually <a class="header-anchor" href="#adding-staff-manually" aria-label="Permalink to &quot;Adding staff manually&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> z_staff (identifier, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, permissions)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;steam:110000112345678&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;AdminName&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[&quot;*&quot;]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="role-column" tabindex="-1">Role column <a class="header-anchor" href="#role-column" aria-label="Permalink to &quot;Role column&quot;">​</a></h3><p>The <code>role</code> column is informational — it affects what the admin panel displays. Actual permissions come from the <code>permissions</code> JSON array.</p><table tabindex="0"><thead><tr><th>role value</th><th>Displayed as</th></tr></thead><tbody><tr><td><code>god</code></td><td>God</td></tr><tr><td><code>superadmin</code></td><td>Super Admin</td></tr><tr><td><code>admin</code></td><td>Admin</td></tr><tr><td><code>mod</code></td><td>Moderator</td></tr></tbody></table><h3 id="via-admin-panel" tabindex="-1">Via admin panel <a class="header-anchor" href="#via-admin-panel" aria-label="Permalink to &quot;Via admin panel&quot;">​</a></h3><p>Staff members with the <code>staff</code> permission can add, edit, and remove other staff members from within the Z-Admin panel under the <strong>Staff</strong> tab. Changes take effect immediately.</p><hr><h2 id="wildcard-permissions" tabindex="-1">Wildcard permissions <a class="header-anchor" href="#wildcard-permissions" aria-label="Permalink to &quot;Wildcard permissions&quot;">​</a></h2><p>Z-Core supports <code>*</code> as a wildcard in the permissions array:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Grant everything</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Grant all sub-permissions under a namespace</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zcore.admin.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>A wildcard check works as follows:</p><ul><li><code>&#39;*&#39;</code> in the player&#39;s permissions → matches any requested permission</li><li><code>&#39;zcore.admin.*&#39;</code> → matches <code>zcore.admin.players</code>, <code>zcore.admin.bans</code>, etc.</li><li><code>&#39;zcore.admin&#39;</code> as a prefix → matches <code>zcore.admin.players</code> (namespace inheritance)</li></ul><hr><h2 id="checking-permissions-from-your-script" tabindex="-1">Checking permissions from your script <a class="header-anchor" href="#checking-permissions-from-your-script" aria-label="Permalink to &quot;Checking permissions from your script&quot;">​</a></h2><p>Use the <code>HasPermission</code> export in any server-side script:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Returns true/false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> allowed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;z-core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bans&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">allowed) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Deny the action</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Get a player&#39;s resolved role string:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Returns: &#39;god&#39; | &#39;superadmin&#39; | &#39;admin&#39; | &#39;mod&#39; | &#39;none&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;z-core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source)</span></span></code></pre></div><hr><h2 id="ace-bypass" tabindex="-1">ACE bypass <a class="header-anchor" href="#ace-bypass" aria-label="Permalink to &quot;ACE bypass&quot;">​</a></h2><p>Players with ACE permission <code>god</code> automatically pass all Z-Core permission checks, regardless of their database role or framework group. This is useful for server console or host-level players.</p><p>Set ACE permissions in <code>server.cfg</code>:</p><div class="language-cfg vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cfg</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>add_ace identifier.steam:110000112345678 god allow</span></span></code></pre></div>`,57)])])}const g=i(n,[["render",r]]);export{c as __pageData,g as default};
